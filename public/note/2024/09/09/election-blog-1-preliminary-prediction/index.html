<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Election Blog #1: Preliminary Prediction | A minimal Hugo website</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Election Blog #1: Preliminary Prediction</span></h1>
<h2 class="author">Shivali Korgaonkar</h2>
<h2 class="date">2024/09/09</h2>
</div>

<main>
<p>Introduction: Analyzing Past Presidential Elections
September 9, 2024</p>
<pre><code class="language-r">####----------------------------------------------------------#
#### Read and clean presidential popular vote.
####----------------------------------------------------------#

# Read presidential popular vote. 
d_popvote &lt;- read_csv(&quot;~/Downloads/popvote_1948-2020.csv&quot;)
</code></pre>
<pre><code>## Rows: 38 Columns: 9
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (2): party, candidate
## dbl (3): year, pv, pv2p
## lgl (4): winner, incumbent, incumbent_party, prev_admin
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
</code></pre>
<pre><code class="language-r"># Subset data to most recent past election year. 
d_popvote |&gt;
  filter(year == 2020) |&gt;
  select(party, candidate, pv2p)
</code></pre>
<pre><code>## # A tibble: 2 × 3
##   party      candidate         pv2p
##   &lt;chr&gt;      &lt;chr&gt;            &lt;dbl&gt;
## 1 democrat   Biden, Joseph R.  52.3
## 2 republican Trump, Donald J.  47.7
</code></pre>
<pre><code class="language-r"># Pivot data to wide format with party names as columns and two-party vote share as values.
(d_popvote_wide &lt;- d_popvote |&gt;
    select(year, party, pv2p) |&gt;
    pivot_wider(names_from = party, values_from = pv2p))
</code></pre>
<pre><code>## # A tibble: 19 × 3
##     year democrat republican
##    &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
##  1  1948     52.3       47.7
##  2  1952     44.7       55.3
##  3  1956     42.2       57.8
##  4  1960     50.1       49.9
##  5  1964     61.3       38.7
##  6  1968     49.6       50.4
##  7  1972     38.2       61.8
##  8  1976     51.1       48.9
##  9  1980     44.8       55.2
## 10  1984     40.9       59.1
## 11  1988     46.2       53.8
## 12  1992     53.6       46.4
## 13  1996     54.8       45.2
## 14  2000     50.3       49.7
## 15  2004     48.7       51.3
## 16  2008     53.8       46.2
## 17  2012     51.9       48.1
## 18  2016     51.2       48.8
## 19  2020     52.3       47.7
</code></pre>
<pre><code class="language-r"># Modify winner column to show &quot;D&quot; if Democrats win and &quot;R&quot; if Republicans win. 
(d_popvote_wide &lt;- d_popvote_wide |&gt; 
    mutate(winner = case_when(democrat &gt; republican ~ &quot;D&quot;,
                              TRUE ~ &quot;R&quot;)))
</code></pre>
<pre><code>## # A tibble: 19 × 4
##     year democrat republican winner
##    &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt; 
##  1  1948     52.3       47.7 D     
##  2  1952     44.7       55.3 R     
##  3  1956     42.2       57.8 R     
##  4  1960     50.1       49.9 D     
##  5  1964     61.3       38.7 D     
##  6  1968     49.6       50.4 R     
##  7  1972     38.2       61.8 R     
##  8  1976     51.1       48.9 D     
##  9  1980     44.8       55.2 R     
## 10  1984     40.9       59.1 R     
## 11  1988     46.2       53.8 R     
## 12  1992     53.6       46.4 D     
## 13  1996     54.8       45.2 D     
## 14  2000     50.3       49.7 D     
## 15  2004     48.7       51.3 R     
## 16  2008     53.8       46.2 D     
## 17  2012     51.9       48.1 D     
## 18  2016     51.2       48.8 D     
## 19  2020     52.3       47.7 D
</code></pre>
<pre><code class="language-r"># Summarize data with respect to winners. 
d_popvote_wide |&gt; 
  group_by(winner) |&gt;
  summarise(races = n())
</code></pre>
<pre><code>## # A tibble: 2 × 2
##   winner races
##   &lt;chr&gt;  &lt;int&gt;
## 1 D         11
## 2 R          8
</code></pre>
<pre><code class="language-r">####----------------------------------------------------------#
#### Extension 1: Creating My Custom Blog Theme
####----------------------------------------------------------#

my_blog_theme &lt;- function() {
  theme(
    panel.border = element_blank(),
    panel.background = element_rect(fill = &quot;gray92&quot;),
    plot.title = element_text(size = 18, hjust = 0.8, color = &quot;gray16&quot;, face = &quot;bold&quot;, family = &quot;Times New Roman&quot;), 
    plot.subtitle = element_text(size = 14, color = &quot;black&quot;, hjust = 0.5, family = &quot;Times New Roman&quot;),
    axis.text.x = element_text(angle = 45, hjust = 1),
    axis.text = element_text(size = 10, family = &quot;Times New Roman&quot;),
    axis.line = element_line(colour = &quot;black&quot;),
    axis.title = element_text(size = 12, family = &quot;Times New Roman&quot;),
    legend.position = &quot;right&quot;,
    legend.text = element_text(size = 12))
}

#Adding state abbreviations to map

state_centers &lt;- data.frame(state.abb, state.center, state.name)
</code></pre>
<p>In politics and beyond, history can be an imperative indicator of what will happen in the future. Relative to other predictive models, elections can be difficult because the sample size is small and variant. Nonetheless, voting trends can and should be used to observe national trends.
American presidential elections have historically narrowed down to the Democratic and Republican candidates&rsquo; respective vote share. The graph above highlights the competitive elections that have taken place between 1948 and 2020 in the United States. The competitive nature of these elections shows promise to our strong democratic systems. They also indicate the importance of using past elections to predict future ones.</p>
<pre><code class="language-r">####----------------------------------------------------------#
#### Visualize trends in national presidential popular vote. 
####----------------------------------------------------------#

# Visualize the two-party presidential popular over time. 


ggplot(data = d_popvote, aes(x = year, y = pv2p, color = party)) +
  geom_line() +
  scale_color_manual(values = c(&quot;dodgerblue3&quot;, &quot;firebrick3&quot;)) +
  labs(title = &quot;Two Party Presidential Popular Vote&quot;,
       subtitle = &quot;1948-2020&quot;) +
  my_blog_theme()
</code></pre>
<img src="https://example.org/note/2024/09/09/election-blog-1-preliminary-prediction/index_files/figure-html/unnamed-chunk-3-1.png" width="672" />
  Some notable trends exist over the past century, many of which can be credited to significant historical events. It's clear that the difference between the two party's vote share was much more drastic decades ago. Today, elections are likely to be within a ten point margin, whereas in the late 20th century, they would exceed 20 point differences. In recent decades, elections have become tighter, reflecting increased polarization and more closely divided public opinions on key issues. This tightening is often attributed to growing ideological divisions between the parties and heightened partisan engagement among voters.
<pre><code class="language-r">####----------------------------------------------------------#
#### State-by-state map of presidential popular votes.
####----------------------------------------------------------#

# Sequester shapefile of states from `maps` library.
states_map &lt;- map_data(&quot;state&quot;)

# Read wide version of dataset that can be used to compare candidate votes with one another. 
d_pvstate_wide &lt;- read_csv(&quot;~/Downloads/clean_wide_state_2pv_1948_2020.csv&quot;)
</code></pre>
<pre><code>## Rows: 959 Columns: 14
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (1): state
## dbl (13): year, D_pv, R_pv, D_pv2p, R_pv2p, D_pv_lag1, R_pv_lag1, D_pv2p_lag...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
</code></pre>
<pre><code class="language-r"># Merge d_pvstate_wide with state_map.
d_pvstate_wide$region &lt;- tolower(d_pvstate_wide$state)

pv_map &lt;- d_pvstate_wide |&gt;
  filter(year == 2020) |&gt;
  left_join(states_map, state_abb, by = &quot;region&quot;)

# Make map grid of state winners for each election year available in the dataset. 

pv_win_map &lt;- d_pvstate_wide |&gt;
  filter(year == 2020) |&gt;
  left_join(states_map, by = &quot;region&quot;) |&gt;
  mutate(winner = if_else(R_pv &gt; D_pv, &quot;republican&quot;, &quot;democrat&quot;))

pv_win_map |&gt;
  ggplot(aes(long, lat, group = group)) +
  geom_polygon(aes(fill = winner), color = &quot;black&quot;) +
  labs(title = &quot;2020 Presidential Election&quot;,
       y = &quot;Latitude&quot;, x = &quot;Longitude&quot;) +
  scale_fill_manual(values = c(&quot;dodgerblue3&quot;, &quot;firebrick3&quot;),
                    name = &quot;Party Winner&quot;) +
  my_blog_theme()
</code></pre>
<img src="https://example.org/note/2024/09/09/election-blog-1-preliminary-prediction/index_files/figure-html/unnamed-chunk-4-1.png" width="672" />
<pre><code class="language-r">d_pvstate_wide |&gt;
  filter(year &gt;= 1980) |&gt;
  left_join(states_map, by = &quot;region&quot;) |&gt;
  mutate(winner = ifelse(R_pv&gt; D_pv, &quot;republican&quot;, &quot;democrat&quot;)) |&gt;
  ggplot(aes(long, lat, group = group)) +
  facet_wrap(facets = year~.) +
  geom_polygon(aes(fill=winner), color = &quot;white&quot;) +
  scale_fill_manual(values = c(&quot;dodgerblue3&quot;, &quot;firebrick3&quot;)) +
  labs(title = &quot;Presidential Election Winner by State&quot;,
       subtitle = &quot;1948-2020&quot;,
       y = &quot;Latitude&quot;, x = &quot;Longitude&quot;) +
  guides(fill=guide_legend(title = &quot;Election Winner&quot;)) +
  theme(strip.text = element_text(size = 12),
        aspect.ratio=1) +
  my_blog_theme()
</code></pre>
<pre><code>## Warning in left_join(filter(d_pvstate_wide, year &gt;= 1980), states_map, by = &quot;region&quot;): Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 1 of `x` matches multiple rows in `y`.
## ℹ Row 1 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship =
##   &quot;many-to-many&quot;` to silence this warning.
</code></pre>
<img src="https://example.org/note/2024/09/09/election-blog-1-preliminary-prediction/index_files/figure-html/unnamed-chunk-4-2.png" width="672" />
<pre><code class="language-r">####----------------------------------------------------------#
#### Forecast: simplified electoral cycle model. 
####----------------------------------------------------------#

# Create prediction (pv2p and margin) based on simplified electoral cycle model: 
# vote_2024 = 3/4*vote_2020 + 1/4*vote_2016 (lag1, lag2, respectively). 

pv2p_2024_states &lt;-
  d_pvstate_wide |&gt;
  filter(year == 2020) |&gt;
  group_by(state) |&gt;
  summarize(D_pv2p_2024 = 0.75*D_pv2p + 0.25*D_pv2p_lag1,
            R_pv2p_2024 = 0.75*R_pv2p + 0.25*R_pv2p_lag1) |&gt;
  mutate(pv2p_2024_margin = R_pv2p_2024 - D_pv2p_2024,
         region = tolower(state))
</code></pre>
<p>Using the simplified electoral cycle model (vote_2024 = 3/4<em>vote_2020 + 1/4</em>vote_2016), we can predict the two party popular vote share for the 2024 election. The map below details the vote share by state, coloring states blue that voted Democratic and states red that swing Republican.
However, it is important to note that our elections do not rely on the popular vote outcome. Oftentimes, states vote a consistent way that make elections somewhat predictable. This causes elections to generally rely on the votes of a handful of swing states who bounce between blue and red. Usually, the popular votes can match the outcome of the election, but since we have an electoral college, this is not always the case. Namely, the 2016 election caused uproar when Hillary Clinton defeated Donald Trump in the popular vote, but lost the electoral college. In history, this has happened five times. That&rsquo;s why it&rsquo;s crucial that election predictions go one step further and look at the electoral college votes.</p>
<pre><code class="language-r">####----------------------------------------------------------#
#### Prediction Based on Popular Vote
####----------------------------------------------------------#

pv2p_2024_states |&gt;
  left_join(states_map, by = &quot;region&quot;) |&gt;
  ggplot(aes(long, lat, group = group)) +
  geom_polygon(aes(fill = pv2p_2024_margin), color = &quot;black&quot;) +
  scale_fill_gradient2(high = &quot;firebrick3&quot;,
                       mid= &quot;white&quot;,
                       name = &quot;Win Margin&quot;,
                       low = &quot;dodgerblue3&quot;,
                       breaks = c (-50, -25, 0, 25, 50),
                       limits = c(-50, 50)) +
  theme(strip.text = element_text(size = 12),
        aspect.ratio=1) +
  labs(title = &quot;2024 Presidential Election Prediction&quot;,
       y = &quot;Latitude&quot;, x = &quot;Longitude&quot;) +
  my_blog_theme()
</code></pre>
<img src="https://example.org/note/2024/09/09/election-blog-1-preliminary-prediction/index_files/figure-html/unnamed-chunk-6-1.png" width="672" />
<pre><code class="language-r">####----------------------------------------------------------#
#### Prediction Based on Popular Vote
####----------------------------------------------------------#

# Generate projected state winners and merge with electoral college votes to make summary of electoral college vote distributions. 

ec_full &lt;- read_csv(&quot;~/Downloads/ec_full.csv&quot;)
</code></pre>
<pre><code>## Rows: 936 Columns: 3
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): state
## dbl (2): electors, year
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
</code></pre>
<pre><code class="language-r">pv2p_2024_states &lt;- pv2p_2024_states |&gt;
  mutate(winner = ifelse(R_pv2p_2024 &gt; D_pv2p_2024, &quot;R&quot;, &quot;D&quot;),
         year = 2024)

pv2p_2024_states &lt;- pv2p_2024_states |&gt;
  left_join(ec_full, by = c(&quot;state&quot;, &quot;year&quot;))

pv2p_2024_states |&gt; 
  group_by(winner) |&gt;
  summarise(electoral_votes = sum(electors))
</code></pre>
<pre><code>## # A tibble: 2 × 2
##   winner electoral_votes
##   &lt;chr&gt;            &lt;dbl&gt;
## 1 D                  276
## 2 R                  262
</code></pre>
<pre><code class="language-r">####----------------------------------------------------------#
#### Extension 2: Who actually won each election? 
####----------------------------------------------------------#

# Re-read in electoral college data and add missing values for DC in 2012, 2016, 2020
ec_DC &lt;- read_csv(&quot;~/Downloads/ec_full.csv&quot;)
</code></pre>
<pre><code>## Rows: 936 Columns: 3
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): state
## dbl (2): electors, year
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
</code></pre>
<pre><code class="language-r">ec_DC &lt;- ec_DC |&gt;
  mutate(electors = ifelse(state==&quot;District of Columbia&quot; | state==&quot;District Of Columbia&quot;, 3, electors))

# Create a new variable that shows who (Democrat or Republican) won each state in each election 

d_ec_wide &lt;- d_pvstate_wide |&gt;
  select(year, state, D_pv, R_pv) |&gt;
  mutate(state_winner = ifelse(D_pv &gt; R_pv, &quot;D&quot;, &quot;R&quot;)) |&gt;
  filter (year &gt; 1948) ## Remove 1948 because data set says that Democrats won 0% of popular vote in Alabama, which is wrong
</code></pre>
<p>I removed 1948 from the data set because there is only 19% of popular vote accounted for in Alabama, which is not historically accurate. Also, the electoral college data set does not have an elector count recorded for 1948.
1960 is also not included in the electoral college data set, so the election results are not represented.</p>
<pre><code class="language-r">ec &lt;- read_csv(&quot;~/Downloads/ec_full.csv&quot;)
</code></pre>
<pre><code>## Rows: 936 Columns: 3
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): state
## dbl (2): electors, year
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
</code></pre>
<pre><code class="language-r">pv2p_2024_states &lt;- pv2p_2024_states |&gt;
  mutate(year = 2024)|&gt;
  left_join(ec, by = c(&quot;state&quot;, &quot;year&quot;))

pv2p_2024_states |&gt;
  group_by(winner)|&gt;
  summarize(electoral_votes = sum(electors.x))
</code></pre>
<pre><code>## # A tibble: 2 × 2
##   winner electoral_votes
##   &lt;chr&gt;            &lt;dbl&gt;
## 1 D                  276
## 2 R                  262
</code></pre>
<pre><code class="language-r"># Joining electoral college vote data with d_ec_wide dataset

d_ec_wide &lt;- d_ec_wide |&gt;
  left_join(ec_DC, by = c(&quot;state&quot;,&quot;year&quot;)) 

# Finding the winner of each election 

d_ec_wide &lt;- d_ec_wide |&gt;
  group_by(year, state_winner)|&gt;
  summarize(electoral_votes = sum(electors)) 
</code></pre>
<pre><code>## `summarise()` has grouped output by 'year'. You can override using the
## `.groups` argument.
</code></pre>
<pre><code class="language-r">d_ec_wide |&gt;
  pivot_wider(names_from = state_winner, values_from = electoral_votes) |&gt;
  mutate(election_winner = ifelse(D &gt;= 270, &quot;D&quot;, &quot;R&quot;))
</code></pre>
<pre><code>## # A tibble: 18 × 4
## # Groups:   year [18]
##     year     D     R election_winner
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;          
##  1  1952    82   446 R              
##  2  1956    71   457 R              
##  3  1960    NA    NA &lt;NA&gt;           
##  4  1964   481    57 D              
##  5  1968   197   341 R              
##  6  1972    15   523 R              
##  7  1976   292   246 D              
##  8  1980    82   456 R              
##  9  1984    13   525 R              
## 10  1988   112   426 R              
## 11  1992   386   152 D              
## 12  1996   386   152 D              
## 13  2000   278   260 D              
## 14  2004   270   268 D              
## 15  2008   370   168 D              
## 16  2012   338   202 D              
## 17  2016   229   311 R              
## 18  2020   309   231 D
</code></pre>

</main>

  <footer>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="//cdn.jsdelivr.net/combine/npm/katex/dist/katex.min.js,npm/katex/dist/contrib/auto-render.min.js,npm/@xiee/utils/js/render-katex.js" defer></script>

<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/center-img.min.js" defer></script>

  
  <hr/>
  © <a href="https://yihui.org">Yihui Xie</a> 2017 &ndash; 2024 | <a href="https://github.com/yihui">Github</a> | <a href="https://twitter.com/xieyihui">Twitter</a>
  
  </footer>
  </body>
</html>

